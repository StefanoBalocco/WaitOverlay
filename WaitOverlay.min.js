"use strict";export default class t{static t(e,...i){const o=structuredClone(e);for(const e of i)if(e)for(const i of Object.keys(e)){const s=e[i],a=o[i];null===s||"object"!=typeof s||Array.isArray(s)||null===a||"object"!=typeof a||Array.isArray(a)?o[i]=null!==s&&"object"==typeof s?structuredClone(s):s:o[i]=t.t(a,s)}return o}static i(t,e){for(const i of Object.keys(e))t.style.setProperty(i,e[i])}static o(e,i,o,s,a){const n=document.createElement("div");return n.className="waitoverlay_element",n.style.order=String(i),t.i(n,t.l.element),n.dataset.autoresize=o?"1":"0",n.dataset.resizefactor=String(s),e.appendChild(n),a?.name&&!t.m.includes(a.name)&&(a.name=""),a?.name&&a?.time&&t.u.test(a.time)&&(n.style.animationName="waitoverlay_animation__"+a.name,n.style.animationDuration=a.time,n.style.animationTimingFunction="linear",n.style.animationIterationCount="infinite"),n}static p={resize:!0,background:"rgba(255, 255, 255, 0.8)",backgroundClass:"",image:{enabled:!0,class:"",value:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 1000'><circle r='80' cx='500' cy='90'/><circle r='80' cx='500' cy='910'/><circle r='80' cx='90' cy='500'/><circle r='80' cx='910' cy='500'/><circle r='80' cx='212' cy='212'/><circle r='80' cx='788' cy='212'/><circle r='80' cx='212' cy='788'/><circle r='80' cx='788' cy='788'/></svg>",autoResize:!0,resizeFactor:1,color:{fill:"#202020"},order:1,animation:{name:"rotate_right",time:"2000ms"}},custom:{enabled:!1,value:"",autoResize:!0,resizeFactor:1,order:3,animation:{name:"",time:""}},text:{enabled:!1,value:"",class:"",autoResize:!0,resizeFactor:.5,color:"#202020",order:4,animation:{name:"",time:""}},progress:{enabled:!1,class:"",autoResize:!0,resizeFactor:.25,min:0,max:100,speed:200,position:"",margin:"",color:"#a0a0a0",order:5},size:{value:50,units:""},maxSize:120,minSize:20,direction:"column",fade:[400,200],zIndex:2147483647};static v=/^(0*(?:\.\d*[1-9]\d*|[1-9]\d*(?:\.\d+)?))(vm[ai]x|r?em|in|p[tcx]|v[hw]|[cm]m|%)$/;static u=/^(?:\d+)(?:\.\d+)?(?:ms|s)$/;static m=["rotate_right","rotate_left","fadein","pulse"];static h=["top","bottom"];static l={overlay:{"box-sizing":"border-box",position:"relative",display:"flex","flex-wrap":"nowrap","align-items":"center","justify-content":"space-around"},element:{"box-sizing":"border-box",overflow:"visible",flex:"0 0 auto",display:"flex","justify-content":"center","align-items":"center"},svg:{width:"100%",height:"100%"},progressBar:{position:"absolute",left:"0"},progressFixed:{position:"absolute",left:"0",width:"100%"},progressBarWrapper:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},fixedPositioning:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%"}};static _=null;static GetInstance(){return null===t._&&(t._=new t),t._}S;F;constructor(){this.S=new WeakMap,this.F=structuredClone(t.p);const e=["@keyframes waitoverlay_animation__rotate_right {","  to { transform: rotate(360deg); }","}","@keyframes waitoverlay_animation__rotate_left {","  to { transform: rotate(-360deg); }","}","@keyframes waitoverlay_animation__fadein {","  0% { opacity: 0; transform: scale(0.1, 0.1); }","  50% { opacity: 1; }","  100% { opacity: 0; transform: scale(1, 1); }","}","@keyframes waitoverlay_animation__pulse {","  0% { transform: scale(0, 0); }","  50% { transform: scale(1, 1); }","  100% { transform: scale(0, 0); }","}"].join(" "),i=document.createElement("style");i.textContent=e,document.head.appendChild(i)}Show(e,i){const o=i||document.body,s=this.k(o,e);if(s.showCount++,!s.overlayElement){const e=document.createElement("div");if(e.className="waitoverlay",t.i(e,t.l.overlay),e.style.flexDirection="row"===s.settings.direction.toLowerCase()?"row":"column",s.settings.backgroundClass?e.classList.add(s.settings.backgroundClass):e.style.background=s.settings.background,s.wholePage&&t.i(e,t.l.fixedPositioning),void 0!==s.settings.zIndex&&(e.style.zIndex=String(s.settings.zIndex)),s.settings.image.enabled){const i=s.settings.image,o=t.o(e,i.order,i.autoResize,i.resizeFactor,i.animation),a=i.value.toLowerCase();a.startsWith("<svg")&&a.endsWith("</svg>")?(o.innerHTML=i.value,this.C(o,s.settings)):".svg"==a.slice(-4)||"data:image/svg"==a.slice(0,14)?fetch(i.value,{method:"GET"}).then(t=>t.text()).then(t=>{s.overlayElement&&(o.innerHTML=t,this.C(o,s.settings))}).catch(()=>{}):(o.style.backgroundImage="url("+i.value+")",o.style.backgroundPosition="center",o.style.backgroundRepeat="no-repeat",o.style.backgroundSize="cover"),i.class&&o.classList.add(i.class)}if(s.settings.custom.enabled){const i=s.settings.custom;t.o(e,i.order,i.autoResize,i.resizeFactor,i.animation).innerHTML=i.value}if(s.settings.text.enabled){const i=s.settings.text;s.textElement=t.o(e,i.order,i.autoResize,i.resizeFactor,i.animation),s.textElement.classList.add("waitoverlay_text"),s.textElement.textContent=i.value,i.class?s.textElement.classList.add(i.class):i.color&&(s.textElement.style.color=i.color)}if(s.settings.progress.enabled){const i=s.settings.progress,o=t.o(e,i.order,i.autoResize,i.resizeFactor);o.classList.add("waitoverlay_progress");const a=document.createElement("div");t.i(a,t.l.progressBarWrapper),o.appendChild(a);const n=document.createElement("div");t.i(n,t.l.progressBar),a.appendChild(n);const r={bar:n,position:"",margin:"0",min:parseFloat(String(i.min)),max:parseFloat(String(i.max)),speed:parseInt(String(i.speed),10)};switch(t.h.includes(i.position)&&(r.position=i.position),t.v.test(i.margin)&&(r.margin=i.margin),t.i(o,t.l.progressFixed),r.position){case"top":o.style.top=r.margin;break;case"bottom":o.style.top="auto",o.style.bottom=r.margin}i.class?n.classList.add(i.class):i.color&&(n.style.background=i.color),s.progress=r}if(s.overlayElement=e,o.appendChild(e),s.settings.resize){this.j(s,o,!0);const t=new ResizeObserver(()=>{this.j(s,o,!1)});t.observe(o),s.resizeObserver=t}e.style.opacity="1",0<s.settings.fade[0]&&(e.style.opacity="0",e.style.transition="opacity "+s.settings.fade[0]+"ms",s.fadeAnimationId=requestAnimationFrame(()=>{s.overlayElement&&(s.overlayElement.style.opacity="1")}))}}Hide(t,e){const i=e||document.body,o=this.S.get(i);if(o&&(o.showCount--,o.showCount<0&&(o.showCount=0),t||0>=o.showCount))if(o.overlayElement){const t=o.overlayElement,e=o.settings.fade[1];0<e?(t.style.transition="opacity "+e+"ms",t.addEventListener("transitionend",()=>{this.R(o,i)},{once:!0}),setTimeout(()=>{this.R(o,i)},e+50),t.style.opacity="0"):this.R(o,i)}else this.R(o,i)}Resize(t){const e=t||document.body,i=this.S.get(e);i&&i.overlayElement&&this.j(i,e,!0)}Text(t,e){const i=e||document.body,o=this.S.get(i);o&&o.textElement&&(o.textElement.style.display="none",!1!==t&&(o.textElement.style.display="",o.textElement.textContent=t))}Progress(t,e){const i=e||document.body,o=this.S.get(i);if(o&&o.progress)if(!1===t)o.progress.bar.style.display="none";else if(o.progress.max>o.progress.min){let e=100*((isNaN(t)?0:t)-o.progress.min)/(o.progress.max-o.progress.min);e=Math.max(0,Math.min(100,e)||0),o.progress.bar.style.display="",o.progress.bar.style.transition="width "+o.progress.speed+"ms",o.progress.bar.style.width=e+"%"}}Destroy(t){const e=t||document.body,i=this.S.get(e);i&&this.R(i,e)}Configure(e){this.F=t.t(this.F,e)}k(e,i){let o=this.S.get(e);const s=o&&null!==o.overlayElement?o.settings:t.t(this.F,i||{});return o||(o={wholePage:e===document.body,settings:{},overlayElement:null,textElement:null,progress:null,resizeObserver:void 0,fadeAnimationId:void 0,showCount:0},this.S.set(e,o)),o.settings=s,o}j(e,i,o){if(e.overlayElement){const s=e.overlayElement,a=i,n=0<a.offsetWidth||0<a.offsetHeight;if(s.style.display=n?t.l.overlay.display:"none",e.wholePage||(s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.width=a.offsetWidth+"px",s.style.height=a.offsetHeight+"px"),0<e.settings.size.value){let t=e.settings.size.value;if(""===e.settings.size.units){let i,o;e.wholePage?(i=window.innerWidth,o=window.innerHeight):(i=a.clientWidth,o=a.clientHeight),t=Math.min(i,o)*t/100,e.settings.maxSize&&t>e.settings.maxSize&&(t=e.settings.maxSize),e.settings.minSize&&t<e.settings.minSize&&(t=e.settings.minSize)}const i=e.settings.size.units||"px";s.querySelectorAll(":scope > .waitoverlay_element").forEach(s=>{const a=s;if(o||"1"===a.dataset.autoresize){const o=parseFloat(a.dataset.resizefactor||"1"),s=t*o+i;if(a.classList.contains("waitoverlay_fa")||a.classList.contains("waitoverlay_text"))a.style.fontSize=s;else if(a.classList.contains("waitoverlay_progress")){if(e.progress)switch(e.progress.bar.style.height=s,e.progress.position){case"top":{a.style.top=e.progress.margin;const s=a.offsetTop;e.progress.bar.style.top=s-t*o*.5+i;break}case"bottom":a.style.top="auto",a.style.bottom=e.progress.margin}}else a.style.width=s,a.style.height=s}})}}}R(t,e){t.resizeObserver&&(t.resizeObserver.disconnect(),t.resizeObserver=void 0),t.fadeAnimationId&&(cancelAnimationFrame(t.fadeAnimationId),t.fadeAnimationId=void 0),t.overlayElement&&(t.overlayElement.remove(),t.overlayElement=null),t.textElement=null,t.progress=null,t.showCount=0,this.S.delete(e)}C(e,i){const o=e.firstElementChild;if(o instanceof SVGElement&&t.i(o,t.l.svg),!i.image.class&&i.image.color.fill){e.querySelectorAll("*").forEach(t=>{const e=t;e.style.fill=i.image.color.fill,i.image.color.stroke&&(e.style.stroke=i.image.color.stroke)})}}}