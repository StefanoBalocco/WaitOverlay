"use strict";export default class t{static t(e,...i){const o=structuredClone(e);for(const e of i)if(e)for(const i of Object.keys(e)){const s=e[i],a=o[i];null===s||"object"!=typeof s||Array.isArray(s)||null===a||"object"!=typeof a||Array.isArray(a)?o[i]=null!==s&&"object"==typeof s?structuredClone(s):s:o[i]=t.t(a,s)}return o}static i(t,e){for(const i of Object.keys(e))t.style.setProperty(i,e[i])}static o(e,i,o,s,a){const n=document.createElement("div");return n.className="waitoverlay_element",n.style.order=String(i),t.i(n,t.m.l),n.dataset.autoresize=o?"1":"0",n.dataset.resizefactor=String(s),e.appendChild(n),a?.name&&!t.u.includes(a.name)&&(a.name=""),a?.name&&a?.time&&t._.test(a.time)&&(n.style.animationName="waitoverlay_animation__"+a.name,n.style.animationDuration=a.time,n.style.animationTimingFunction="linear",n.style.animationIterationCount="infinite"),n}static p={resize:!0,background:"rgba(255, 255, 255, 0.8)",backgroundClass:"",image:{enabled:!0,class:"",value:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 1000'><circle r='80' cx='500' cy='90'/><circle r='80' cx='500' cy='910'/><circle r='80' cx='90' cy='500'/><circle r='80' cx='910' cy='500'/><circle r='80' cx='212' cy='212'/><circle r='80' cx='788' cy='212'/><circle r='80' cx='212' cy='788'/><circle r='80' cx='788' cy='788'/></svg>",autoResize:!0,resizeFactor:1,color:{fill:"#202020"},order:1,animation:{name:"rotate_right",time:"2000ms"}},custom:{enabled:!1,value:"",autoResize:!0,resizeFactor:1,order:3,animation:{name:"",time:""}},text:{enabled:!1,value:"",class:"",autoResize:!0,resizeFactor:.5,color:"#202020",order:4,animation:{name:"",time:""}},progress:{enabled:!1,class:"",autoResize:!0,resizeFactor:.25,min:0,max:100,speed:200,position:"",margin:"",color:"#a0a0a0",order:5},size:{value:50,units:""},maxSize:120,minSize:20,direction:"column",fade:[400,200],zIndex:2147483647};static v=/^(0*(?:\.\d*[1-9]\d*|[1-9]\d*(?:\.\d+)?))(vm[ai]x|r?em|in|p[tcx]|v[hw]|[cm]m)$/;static _=/^(?:\d+)(?:\.\d+)?(?:ms|s)$/;static u=["rotate_right","rotate_left","fadein","pulse"];static h=["top","bottom"];static m={S:{"box-sizing":"border-box",position:"relative",display:"flex","flex-wrap":"nowrap","align-items":"center","justify-content":"space-around"},l:{"box-sizing":"border-box",overflow:"visible",flex:"0 0 auto",display:"flex","justify-content":"center","align-items":"center"},F:{width:"100%",height:"100%"},k:{position:"absolute",left:"0"},C:{position:"absolute",left:"0",width:"100%"},j:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},R:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%"}};static A=null;static GetInstance(){return null===t.A&&(t.A=new t),t.A}I;T;constructor(){this.I=new WeakMap,this.T=structuredClone(t.p);const e=["@keyframes waitoverlay_animation__rotate_right {","  to { transform: rotate(360deg); }","}","@keyframes waitoverlay_animation__rotate_left {","  to { transform: rotate(-360deg); }","}","@keyframes waitoverlay_animation__fadein {","  0% { opacity: 0; transform: scale(0.1, 0.1); }","  50% { opacity: 1; }","  100% { opacity: 0; transform: scale(1, 1); }","}","@keyframes waitoverlay_animation__pulse {","  0% { transform: scale(0, 0); }","  50% { transform: scale(1, 1); }","  100% { transform: scale(0, 0); }","}"].join(" "),i=document.createElement("style");i.textContent=e,document.head.appendChild(i)}Show(e,i){const o=i||document.body,s=this.M(o,e);if(s.P++,!s.S){const e=document.createElement("div");if(e.className="waitoverlay",t.i(e,t.m.S),e.style.flexDirection="row"===s.T.direction.toLowerCase()?"row":"column",s.T.backgroundClass?e.classList.add(s.T.backgroundClass):e.style.background=s.T.background,s.O&&t.i(e,t.m.R),void 0!==s.T.zIndex&&(e.style.zIndex=String(s.T.zIndex)),s.T.image.enabled){const i=s.T.image,o=t.o(e,i.order,i.autoResize,i.resizeFactor,i.animation),a=i.value.toLowerCase();a.startsWith("<svg")&&a.endsWith("</svg>")?(o.innerHTML=i.value,this.B(o,s.T)):".svg"==a.slice(-4)||"data:image/svg"==a.slice(0,14)?fetch(i.value,{method:"GET"}).then(t=>t.text()).then(t=>{s.S&&(o.innerHTML=t,this.B(o,s.T))}).catch(()=>{}):(o.style.backgroundImage="url("+i.value+")",o.style.backgroundPosition="center",o.style.backgroundRepeat="no-repeat",o.style.backgroundSize="cover"),i.class&&o.classList.add(i.class)}if(s.T.custom.enabled){const i=s.T.custom;t.o(e,i.order,i.autoResize,i.resizeFactor,i.animation).innerHTML=i.value}if(s.T.text.enabled){const i=s.T.text;s.G=t.o(e,i.order,i.autoResize,i.resizeFactor,i.animation),s.G.classList.add("waitoverlay_text"),s.G.textContent=i.value,i.class?s.G.classList.add(i.class):i.color&&(s.G.style.color=i.color)}if(s.T.progress.enabled){const i=s.T.progress,o=t.o(e,i.order,i.autoResize,i.resizeFactor);o.classList.add("waitoverlay_progress");const a=document.createElement("div");t.i(a,t.m.j),o.appendChild(a);const n=document.createElement("div");t.i(n,t.m.k),a.appendChild(n);const r={N:n,W:"",$:"0",q:parseFloat(String(i.min)),D:parseFloat(String(i.max)),H:parseInt(String(i.speed),10)};switch(t.h.includes(i.position)&&(r.W=i.position),t.v.test(i.margin)&&(r.$=i.margin),t.i(o,t.m.C),r.W){case"top":o.style.top=r.$;break;case"bottom":o.style.top="auto",o.style.bottom=r.$}i.class?n.classList.add(i.class):i.color&&(n.style.background=i.color),s.V=r}if(s.S=e,o.appendChild(e),s.T.resize){this.J(s,o,!0);const t=new ResizeObserver(()=>{this.J(s,o,!1)});t.observe(o),s.K=t}e.style.opacity="1",0<s.T.fade[0]&&(e.style.opacity="0",e.style.transition="opacity "+s.T.fade[0]+"ms",s.L=requestAnimationFrame(()=>{s.S&&(s.S.style.opacity="1")}))}}Hide(t,e){const i=e||document.body,o=this.I.get(i);if(o&&(o.P--,o.P<0&&(o.P=0),t||0>=o.P))if(o.S){const t=o.S,e=o.T.fade[1];0<e?(t.style.transition="opacity "+e+"ms",t.addEventListener("transitionend",()=>{this.U(o,i)},{once:!0}),o.X=setTimeout(()=>{this.U(o,i)},e+50),t.style.opacity="0"):this.U(o,i)}else this.U(o,i)}Resize(t){const e=t||document.body,i=this.I.get(e);i&&i.S&&this.J(i,e,!0)}Text(t,e){const i=e||document.body,o=this.I.get(i);o&&o.G&&(o.G.style.display="none",!1!==t&&(o.G.style.display="",o.G.textContent=t))}Progress(t,e){const i=e||document.body,o=this.I.get(i);if(o&&o.V)if(!1===t)o.V.N.style.display="none";else if(o.V.D>o.V.q){let e=100*((isNaN(t)?0:t)-o.V.q)/(o.V.D-o.V.q);e=Math.max(0,Math.min(100,e)||0),o.V.N.style.display="",o.V.N.style.transition="width "+o.V.H+"ms",o.V.N.style.width=e+"%"}}Destroy(t){const e=t||document.body,i=this.I.get(e);i&&this.U(i,e)}Configure(e){this.T=t.t(this.T,e)}M(e,i){let o=this.I.get(e);const s=o&&null!==o.S?o.T:t.t(this.T,i||{});return o||(o={O:e===document.body,T:{},S:null,G:null,V:null,K:void 0,L:void 0,X:void 0,P:0},this.I.set(e,o)),o.T=s,o}J(e,i,o){if(e.S){const s=e.S,a=0<i.offsetWidth||0<i.offsetHeight;if(s.style.display=a?t.m.S.display:"none",e.O||(s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.width=i.offsetWidth+"px",s.style.height=i.offsetHeight+"px"),0<e.T.size.value){let t=e.T.size.value;if(""===e.T.size.units){let o,s;e.O?(o=window.innerWidth,s=window.innerHeight):(o=i.clientWidth,s=i.clientHeight),t=Math.min(o,s)*t/100,e.T.maxSize&&t>e.T.maxSize&&(t=e.T.maxSize),e.T.minSize&&t<e.T.minSize&&(t=e.T.minSize)}const a=e.T.size.units||"px";s.querySelectorAll(":scope > .waitoverlay_element").forEach(i=>{if(o||"1"===i.dataset.autoresize){const o=parseFloat(i.dataset.resizefactor||"1"),s=t*o+a;if(i.classList.contains("waitoverlay_fa")||i.classList.contains("waitoverlay_text"))i.style.fontSize=s;else if(i.classList.contains("waitoverlay_progress")){if(e.V)switch(e.V.N.style.height=s,e.V.W){case"top":{i.style.top=e.V.$;const s=i.offsetTop;e.V.N.style.top=s-t*o*.5+a;break}case"bottom":i.style.top="auto",i.style.bottom=e.V.$}}else i.style.width=s,i.style.height=s}})}}}U(t,e){t.K&&(t.K.disconnect(),t.K=void 0),void 0!==t.L&&(cancelAnimationFrame(t.L),t.L=void 0),void 0!==t.X&&(clearTimeout(t.X),t.X=void 0),t.S&&(t.S.remove(),t.S=null),t.G=null,t.V=null,t.P=0,this.I.delete(e)}B(e,i){const o=e.firstElementChild;if(o instanceof SVGElement&&t.i(o,t.m.F),!i.image.class&&i.image.color.fill){e.querySelectorAll("*").forEach(t=>{t.style.fill=i.image.color.fill,i.image.color.stroke&&(t.style.stroke=i.image.color.stroke)})}}}